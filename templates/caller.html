<!DOCTYPE html>
<html lang="en">
  <head>
    <link href={{ url_for('static', filename='favicon.ico') }} rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta charset="utf-8">

    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>

    <title>
      Bingo Caller
    </title>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:400&display=swap" rel="stylesheet">
    <style>
      body {
        background-color: white;
      }

      * {
        font-family: 'Ubuntu', sans-serif;
        font-size: 16pt;
        color: black;
      }

      h1 {
        font-size: 50pt;
      }

      h3 {
        font-size: 20pt;
        margin: 15px 0px 15px;
      }

      .hide-overflow{
        overflow: hidden;
      }

      .margin {
        margin-top: 40px;
        margin-bottom: 40px;
      }

      span {
        font-style: inherit;
        color: inherit;
        font-family: inherit;
        font-size: inherit;
      }

      .square{
        width:5vw;
        height:5vw;
        border: 1px solid #000;
      }

      .square h2 {
        margin-top:1vw;
        font-size: 3vw;
      }

      .square[value="0"] { background-color:white; color:black}
      .square[value="1"] { background-color:grey; color:white}

      #B{background-color:red; color:white}
      #I{background-color:orange; color:white}
      #N{background-color:green; color:white}
      #G{background-color:blue; color:white}
      #O{background-color:purple; color:white}


    </style>
  </head>
  <body>
    <div class="container-fluid">
      <a href="/" style="margin:20px; display:inline-block"><span class="glyphicon glyphicon-home"></span></a>
      <div class="row margin">
        <div class="col-md-12">
          <table style="margin:auto">
            <tr>
              <td><div class="square" id="B"><h2 class="text-center">B</h2></div></td>
              <td><div class="square" id="1" value="0"><h2 class="text-center">1</h2></div></td>
              <td><div class="square" id="2" value="0"><h2 class="text-center">2</h2></div></td>
              <td><div class="square" id="3" value="0"><h2 class="text-center">3</h2></div></td>
              <td><div class="square" id="4" value="0"><h2 class="text-center">4</h2></div></td>
              <td><div class="square" id="5" value="0"><h2 class="text-center">5</h2></div></td>
              <td><div class="square" id="6" value="0"><h2 class="text-center">6</h2></div></td>
              <td><div class="square" id="7" value="0"><h2 class="text-center">7</h2></div></td>
              <td><div class="square" id="8" value="0"><h2 class="text-center">8</h2></div></td>
              <td><div class="square" id="9" value="0"><h2 class="text-center">9</h2></div></td>
              <td><div class="square" id="10" value="0"><h2 class="text-center">10</h2></div></td>
              <td><div class="square" id="11" value="0"><h2 class="text-center">11</h2></div></td>
              <td><div class="square" id="12" value="0"><h2 class="text-center">12</h2></div></td>
              <td><div class="square" id="13" value="0"><h2 class="text-center">13</h2></div></td>
              <td><div class="square" id="14" value="0"><h2 class="text-center">14</h2></div></td>
              <td><div class="square" id="15" value="0"><h2 class="text-center">15</h2></div></td>
            </tr>
            <tr>
              <td><div class="square" id="I"><h2 class="text-center">I</h2></div></td>
              <td><div class="square" id="16" value="0"><h2 class="text-center">16</h2></div></td>
              <td><div class="square" id="17" value="0"><h2 class="text-center">17</h2></div></td>
              <td><div class="square" id="18" value="0"><h2 class="text-center">18</h2></div></td>
              <td><div class="square" id="19" value="0"><h2 class="text-center">19</h2></div></td>
              <td><div class="square" id="20" value="0"><h2 class="text-center">20</h2></div></td>
              <td><div class="square" id="21" value="0"><h2 class="text-center">21</h2></div></td>
              <td><div class="square" id="22" value="0"><h2 class="text-center">22</h2></div></td>
              <td><div class="square" id="23" value="0"><h2 class="text-center">23</h2></div></td>
              <td><div class="square" id="24" value="0"><h2 class="text-center">24</h2></div></td>
              <td><div class="square" id="25" value="0"><h2 class="text-center">25</h2></div></td>
              <td><div class="square" id="26" value="0"><h2 class="text-center">26</h2></div></td>
              <td><div class="square" id="27" value="0"><h2 class="text-center">27</h2></div></td>
              <td><div class="square" id="28" value="0"><h2 class="text-center">28</h2></div></td>
              <td><div class="square" id="29" value="0"><h2 class="text-center">29</h2></div></td>
              <td><div class="square" id="30" value="0"><h2 class="text-center">30</h2></div></td>
            </tr>
            <tr>
              <td><div class="square" id="N"><h2 class="text-center">N</h2></div></td>
              <td><div class="square" id="31" value="0"><h2 class="text-center">31</h2></div></td>
              <td><div class="square" id="32" value="0"><h2 class="text-center">32</h2></div></td>
              <td><div class="square" id="33" value="0"><h2 class="text-center">33</h2></div></td>
              <td><div class="square" id="34" value="0"><h2 class="text-center">34</h2></div></td>
              <td><div class="square" id="35" value="0"><h2 class="text-center">35</h2></div></td>
              <td><div class="square" id="36" value="0"><h2 class="text-center">36</h2></div></td>
              <td><div class="square" id="37" value="0"><h2 class="text-center">37</h2></div></td>
              <td><div class="square" id="38" value="0"><h2 class="text-center">38</h2></div></td>
              <td><div class="square" id="39" value="0"><h2 class="text-center">39</h2></div></td>
              <td><div class="square" id="40" value="0"><h2 class="text-center">40</h2></div></td>
              <td><div class="square" id="41" value="0"><h2 class="text-center">41</h2></div></td>
              <td><div class="square" id="42" value="0"><h2 class="text-center">42</h2></div></td>
              <td><div class="square" id="43" value="0"><h2 class="text-center">43</h2></div></td>
              <td><div class="square" id="44" value="0"><h2 class="text-center">44</h2></div></td>
              <td><div class="square" id="45" value="0"><h2 class="text-center">45</h2></div></td>
            </tr>
            <tr>
              <td><div class="square" id="G"><h2 class="text-center">G</h2></div></td>
              <td><div class="square" id="46" value="0"><h2 class="text-center">46</h2></div></td>
              <td><div class="square" id="47" value="0"><h2 class="text-center">47</h2></div></td>
              <td><div class="square" id="48" value="0"><h2 class="text-center">48</h2></div></td>
              <td><div class="square" id="49" value="0"><h2 class="text-center">49</h2></div></td>
              <td><div class="square" id="50" value="0"><h2 class="text-center">50</h2></div></td>
              <td><div class="square" id="51" value="0"><h2 class="text-center">51</h2></div></td>
              <td><div class="square" id="52" value="0"><h2 class="text-center">52</h2></div></td>
              <td><div class="square" id="53" value="0"><h2 class="text-center">53</h2></div></td>
              <td><div class="square" id="54" value="0"><h2 class="text-center">54</h2></div></td>
              <td><div class="square" id="55" value="0"><h2 class="text-center">55</h2></div></td>
              <td><div class="square" id="56" value="0"><h2 class="text-center">56</h2></div></td>
              <td><div class="square" id="57" value="0"><h2 class="text-center">57</h2></div></td>
              <td><div class="square" id="58" value="0"><h2 class="text-center">58</h2></div></td>
              <td><div class="square" id="59" value="0"><h2 class="text-center">59</h2></div></td>
              <td><div class="square" id="60" value="0"><h2 class="text-center">60</h2></div></td>
            </tr>
            <tr>
              <td><div class="square" id="O"><h2 class="text-center">O</h2></div></td>
              <td><div class="square" id="61" value="0"><h2 class="text-center">61</h2></div></td>
              <td><div class="square" id="62" value="0"><h2 class="text-center">62</h2></div></td>
              <td><div class="square" id="63" value="0"><h2 class="text-center">63</h2></div></td>
              <td><div class="square" id="64" value="0"><h2 class="text-center">64</h2></div></td>
              <td><div class="square" id="65" value="0"><h2 class="text-center">65</h2></div></td>
              <td><div class="square" id="66" value="0"><h2 class="text-center">66</h2></div></td>
              <td><div class="square" id="67" value="0"><h2 class="text-center">67</h2></div></td>
              <td><div class="square" id="68" value="0"><h2 class="text-center">68</h2></div></td>
              <td><div class="square" id="69" value="0"><h2 class="text-center">69</h2></div></td>
              <td><div class="square" id="70" value="0"><h2 class="text-center">70</h2></div></td>
              <td><div class="square" id="71" value="0"><h2 class="text-center">71</h2></div></td>
              <td><div class="square" id="72" value="0"><h2 class="text-center">72</h2></div></td>
              <td><div class="square" id="73" value="0"><h2 class="text-center">73</h2></div></td>
              <td><div class="square" id="74" value="0"><h2 class="text-center">74</h2></div></td>
              <td><div class="square" id="75" value="0"><h2 class="text-center">75</h2></div></td>
            </tr>
          </table>
        </div>
      </div>
      <div class="row margin">
        <div class="col-md-3">
        </div>
        <div class="col-md-6">
          <div class="btn-group-vertical center-block">
            <button type="button" class="btn btn-default center-block"
                    onclick="draw()">
              <h3 class="text-center">Draw</h3>
            </button>
            <button type="button" class="btn btn-default center-block"
                    data-toggle="modal" data-target="#myModal">
              <h3 class="text-center">Clear</h3>
            </button>
          </div>
          <br><br>
          <h1 style="font-size:100pt" class="text-center">{{square}}</h1>
        </div>
        <div class="col-md-3">
        </div>
      </div>
    </div>



    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Clear Confirmation</h4>
          </div>
          <div class="modal-body">
            Are you sure you want to clear?
            <br>
          </div>
          <center><button type="button" class="btn btn-default center-block"
                  onclick="window.location='/caller'"
                  style="background-color:red; color:white; margin:10px;">
            <h3 class="text-center">Clear</h3>
          </button></center>
        </div>
      </div>
    </div>



  <script>



    for (i = 1; i <= 75; i++){
      if ({{ alreadyChosenArray|tojson }} != []){
        if ({{ alreadyChosenArray|tojson }}.includes(i)){
          document.getElementById(i.toString()).setAttribute("value","1");
        }
      }
    }

    function draw(){
      alreadyCheckedArr = {{ alreadyChosenArray|tojson }};

      if (alreadyCheckedArr.length != 75) {
        open = [];
        for (i = 1; i <= 75; i++) {
          if (!alreadyCheckedArr.includes(i)) {
            open.push(i);
          }
        }

        alreadyChecked = '';
        for (i = 1; i <= 75; i++){
          if (alreadyCheckedArr.includes(i)){
            alreadyChecked += '_' + i;
          }
        }

        pick = open[Math.floor((Math.random() * (open.length - 1)) + 1)]

        window.location = "/caller/p" + alreadyChecked + "_" + pick;

      }
    }
    </script>
  </body>
</html>
