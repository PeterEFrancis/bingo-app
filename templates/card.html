<!DOCTYPE html>
<html lang="en">
  <head>
    <link href={{ url_for('static', filename='favicon.ico') }} rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta charset="utf-8">

    <!-- do not cache this page -->
    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>

    <title>
      Bingo Card
    </title>
    <link href="https://fonts.googleapis.com/css?family=Ubuntu:400&display=swap" rel="stylesheet">
    <style>
      body {
        background-color: white;
      }

      * {
        font-family: 'Ubuntu', sans-serif;
        font-size: 16pt;
        color: black;
      }

      h1 {
        font-size: 50pt;
      }

      h3 {
        font-size: 30pt;
        margin: 15px 0px 15px;
      }

      .hide-overflow{
        overflow: hidden;
      }

      .margin {
        margin-top: 40px;
        margin-bottom: 40px;
      }

      span {
        font-style: inherit;
        color: inherit;
        font-family: inherit;
        font-size: inherit;
      }

      .square {
        width:10vw;
        height:10vw;
        border: 1px solid #000;
      }
      .click-square {
        cursor:pointer;
      }


      .square h2 {
        margin-top:2vw;
        font-size: 6vw;
      }

      .square[value="0"] { background-color:white; color:black}
      .square[value="1"] { background-color:grey; color:white}

      #B{background-color:red; color:white}
      #I{background-color:orange; color:white}
      #N{background-color:green; color:white}
      #G{background-color:blue; color:white}
      #O{background-color:purple; color:white}

      .free-space {
        color: white;
        font-size: 3vh;
        margin-top: 1vh;
      }

    </style>
  </head>
  <body onload="clear_board()">
    <div class="container-fluid">
      <a href="/" style="margin:20px; display:inline-block"><span class="glyphicon glyphicon-home"></span></a>
      <div class="row margin">
        <div class="col-md-12">
          <table style="margin:auto">
            <tr>
              <td><div class="square" id="B"><h2 class="text-center">B</h2></div></td>
              <td><div class="square" id="I"><h2 class="text-center">I</h2></div></td>
              <td><div class="square" id="N"><h2 class="text-center">N</h2></div></td>
              <td><div class="square" id="G"><h2 class="text-center">G</h2></div></td>
              <td><div class="square" id="O"><h2 class="text-center">O</h2></div></td>
            </tr>
            {% for row in [0,1,2,3,4] %}
              <tr>
                {% for num in cardArray[row] %}
                  <td><div id="{{num}}" class="square click-square" onclick="toggle({{num}})" value="0"><h2 class="text-center">{{ num }}</h2></div></td>
                {% endfor %}
              </tr>
            {% endfor %}
          </table>
        </div>
      </div>
      <div class="row margin">
        <div class="col-md-3">
        </div>
        <div class="col-md-6">
          <div class="btn-group-vertical center-block">
            <button type="button" class="btn btn-default center-block"
                    data-toggle="modal" data-target="#myModal">
              <h3 class="text-center">Clear</h3>
            </button>
          </div>
          <br><br>
        </div>
        <div class="col-md-3">
        </div>
      </div>
    </div>



    <!-- Modal -->
    <div id="myModal" class="modal fade" role="dialog">
      <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Clear Confirmation</h4>
          </div>
          <div class="modal-body">
            Are you sure you want to clear?
            <br>
          </div>
          <center><button type="button" class="btn btn-default center-block"
                  onclick="clear_board();" data-dismiss="modal"
                  style="background-color:red; color:white; margin:10px;">
            <h3 class="text-center">Clear Board</h3>
          </button></center>
        </div>
      </div>
    </div>

  <script>

  window.onbeforeunload = function () {
      return "Are you sure you want to leave? Your clicks will be lost!";
  }

  </script>

  </body>

  <script>



    function clear_board() {
      card = {{cardArray|tojson}};
      for (r = 0; r < 5; r++) {
        for (c = 0; c < 5; c++) {
          document.getElementById(card[r][c].toString()).setAttribute("value","0");
        }
      }
      var middleSquare = document.getElementById("0");
      middleSquare.setAttribute("value","1");
      middleSquare.innerHTML = "<p class='free-space text-center'>free<br>space</p>";
    }

    function toggle(num) {
      var square = document.getElementById(num.toString());
      var curr = Number(square.getAttribute("value"));
      square.setAttribute('value',(1-curr).toString());
    }

  </script>

</html>
